# NPC Forge v0.2.1 â€“ Model Selection, Dark Mode, and Usage Tracking

**Release Date:** April 29, 2025

This feature-rich patch introduces support for multiple model backends (text and image), a robust usage limit system with tiered access, and a complete dark mode toggle integrated with Tailwind CSS. It also brings key usability improvements to feedback messaging and a fully redesigned documentation layout with standardized visual structure and improved mobile responsiveness.

## Added
- Delayed feedback message system:
  - Displays after 3 seconds of character generation to manage user expectations
- Model selector for text generation:
  - Supports `gpt-4o-mini`, `gpt-4.1-mini`, and `gpt-4o` with usage tiers and monthly limits
- Image model selector for portraits:
  - Supports `dall-e-2`, `dall-e-3`, and `gpt-image-1` with matching tier system
- Visual model selection UI:
  - Tiered design with emoji indicators (ðŸŸ¢ðŸŸ¡ðŸ”´), model names, and descriptions
- Per-model usage limits:
  - Tracked in localStorage, with automatic resets per month
  - Unlimited usage for the cheapest tier
- Development bypass for all usage limits for testing purposes
- Implemented complete dark mode toggle system:
  - Created ThemeContext for managing light, dark, and system themes
  - Added a ThemeToggle button for switching themes
  - Integrated theme switching with Tailwind CSS using the .dark class
  - Persisted user theme preference with localStorage
  - Applied smooth theme transitions across the app

## Changed
- Refactored context and form components to support model selection
- Simplified tier display while retaining full model name transparency
- Updated usage-limit utilities for both image and text models
- Standardized documentation styling across all pages:
  - Consistent header formatting and section structure
  - Unified card layouts, colors, and spacing
  - Standardized text colors, link styles, and content formatting
  - Added consistent "Related Documentation" sections
  - Fixed responsive layout issues on mobile devices
- Corrected Next.js version reference from 15 to 14 throughout documentation
- Fixed date inconsistencies in release information
- Updated ClientLayout to include ThemeProvider and reposition toggle button
- Updated RootLayout to handle dynamic theme colors and suppress hydration warnings
- Enhanced globals.css for dark mode transitions and theme-aware UI components
- Usage limit display and notification components now compare the user's selected text and image models
- Displays whichever selected model has fewer remaining generations (e.g., "7 Portrait Premium generations remaining")

## Fixed
- Hydration warning caused by mismatched theme state on page load
- Responsive layout bugs in documentation on smaller screens
- Date mismatch issues in internal version tracking